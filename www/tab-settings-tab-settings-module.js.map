{"version":3,"sources":["./src/app/pages/tab-settings/tab-settings.module.ts","./src/app/pages/tab-settings/tab-settings.page.ts","./src/app/pages/tab-settings/tab-settings.page.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AAEF;AACU;AACV;AACS;AAEgB;AAEhB;;;AAErD,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kEAAe;KAC3B;CACF;AAED;IAAA;KAIqC;8FAAxB,qBAAqB;wGAArB,qBAAqB;4GAHvB,CAAC,4DAAY,EAAE,8EAAgB,EAAE,0DAAW,EAAE,0DAAW,EAAE,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,mEAAe,CAAC;gCAnBrH;CAsBqC;AAAH;mIAArB,qBAAqB,mBAFjB,kEAAe,aADpB,4DAAY,EAAE,8EAAgB,EAAE,0DAAW,EAAE,0DAAW,EAAE,8DAA+B,mEAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBnD;AAImC;AACpB;AACT;AACwB;AAClC;;;;;;;;;;;;ICmBzD,wEAAqD;IACnD,yFAA2F;IAArD,oXAAgC;IAAqB,4DAAqB;IAClH,qEAAe;;;IADO,0DAAiB;IAAjB,6EAAiB;;ADlB3C;IAQE,yBACkB,iBAAoC,EACnC,cAA8B,EAC9B,eAAgC,EAChC,eAAgC,EAChC,UAAsB,EACtB,gBAAkC,EAClC,iBAAoC;QANrC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACnC,mBAAc,GAAd,cAAc,CAAgB;QAC9B,oBAAe,GAAf,eAAe,CAAiB;QAChC,oBAAe,GAAf,eAAe,CAAiB;QAChC,eAAU,GAAV,UAAU,CAAY;QACtB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,sBAAiB,GAAjB,iBAAiB,CAAmB;QAErD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,EAAE;IAC3D,CAAC;IAEM,uCAAa,GAApB;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IACvG,CAAC;IAEM,wCAAc,GAArB,UAAsB,MAAsB;QAC1C,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,cAAc,EAAE,EAAE,MAAM,UAAE,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IAC3H,CAAC;IAEM,iDAAuB,GAA9B;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IACzH,CAAC;IAEM,0CAAgB,GAAvB;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IACxG,CAAC;IAEY,sCAAY,GAAzB,UAA0B,MAAsB;;;;;;4BACX,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4BACnE,MAAM,EAAE,SAAS,GAAG,MAAM,CAAC,KAAK;4BAChC,SAAS,EAAE,kCAAkC,GAAG,MAAM,CAAC,KAAK,GAAG,GAAG;4BAClE,OAAO,EAAE;gCACP;oCACE,IAAI,EAAE,QAAQ;oCACd,OAAO,EAAE;;;;;;oDACP,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,cAAc,CAAC,CAAC;oDAErD,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4DACnE,OAAO,EAAE,gBAAgB;4DACzB,QAAQ,EAAE,IAAI;4DACd,OAAO,EAAE;gEACP;oEACE,IAAI,EAAE,MAAM;oEACZ,IAAI,EAAE,QAAQ;iEACf;6DACF;yDACF,CAAC;;oDATI,KAAK,GAAwB,SASjC;oDAEF,KAAK,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,UAAC,IAAI;wDAC7B,IAAI,IAAI,KAAK,OAAO,EAAE;4DACpB,KAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,cAAc,CAAC,CAAC;yDACpG;oDACH,CAAC,CAAC;oDAEF,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,WAAW,CAAC,CAAC;;;;yCACnE;iCACF;gCACD;oCACE,IAAI,EAAE,QAAQ;iCACf;6BACF;yBACF,CAAC;;wBAjCI,KAAK,GAAwB,SAiCjC;wBACF,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,WAAW,CAAC,CAAC;;;;;KACnE;IAEM,mCAAS,GAAhB;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IAChG,CAAC;IAEM,gDAAsB,GAA7B;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IAC9G,CAAC;IAEM,wCAAc,GAArB;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IACtG,CAAC;IAEM,wCAAc,GAArB;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IACtG,CAAC;IAEM,wCAAc,GAArB;QAAA,iBAUC;QATC,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC,IAAI,CAChC,UAAC,IAAY;YACX,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC;YACnC,KAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,EAAE,wEAAmB,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,cAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAlB,CAAkB,CAAC;QACnG,CAAC,EACD,UAAC,GAAW;YACV,OAAO,CAAC,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC;QAChC,CAAC,CACF;IACH,CAAC;kFA/FU,eAAe;mGAAf,eAAe;YChB5B,gFAAkC;YAChC,iFAA+B;YAC7B,4EAAW;YAAA,uDAAsC;;YAAA,4DAAY;YAC/D,4DAAc;YAChB,4DAAa;YAEb,8EAAa;YACX,2EAAU;YACR,kFAAiB;YACf,4EAAW;YAAA,uDAAkD;;YAAA,4DAAY;YAC3E,4DAAkB;YAElB,+EAA2D;YAAtB,0IAAS,eAAW,IAAC;YACxD,0EAAoE;YACpE,6EAAW;YAAA,wDAAsC;;YAAA,4DAAY;YAC/D,4DAAW;YAQb,4DAAW;YACX,4EAAU;YACR,mFAAiB;YACf,6EAAW;YAAA,wDAA8C;;YAAA,4DAAY;YACvE,4DAAkB;YAClB,+HAEe;;YACf,8EAAqD;YACnD,iFAAsE;YAAxC,4IAAS,mBAAe,IAAC;YACrD,0EAA6C;YAC7C,6EAAW;YAAA,wDAAmD;;YAAA,4DAAY;YAC5E,4DAAa;YACf,4DAAU;YACZ,4DAAW;YAEX,+EAA6C;YAC3C,sFAAoD;YAClD,6EAAW;YAAA,wDAA0D;;YAAA,4DAAY;YACnF,4DAAkB;YAClB,gFAAqC;YAA3B,0IAAS,oBAAgB,IAAC;YAClC,2EAAmE;YACnE,wDACF;;YAAA,4DAAW;YAEX,gFAAqC;YAA3B,0IAAS,oBAAgB,IAAC;YAClC,2EAAyD;YACzD,wDACF;;YAAA,4DAAW;YAEX,gFAA8C;YAApC,0IAAS,6BAAyB,IAAC;YAC3C,2EAAuE;YACvE,wDACF;;YAAA,4DAAW;YAEX,gFAAuC;YAA7B,0IAAS,sBAAkB,IAAC;YACpC,2EAAqD;YACrD,iFACF;YAAA,4DAAW;YAEX,gFAAqC;YAA3B,0IAAS,oBAAgB,IAAC;YAClC,2EAAiD;YACjD,wDACF;;YAAA,4DAAW;YACb,4DAAW;YACb,4DAAc;;YAlEC,0DAAsC;YAAtC,uJAAsC;YAOpC,0DAAkD;YAAlD,oKAAkD;YAKlD,0DAAsC;YAAtC,wJAAsC;YAYtC,0DAA8C;YAA9C,gKAA8C;YAE1B,0DAAkB;YAAlB,mJAAkB;YAMpC,0DAAmD;YAAnD,qKAAmD;YAOrD,0DAA0D;YAA1D,4KAA0D;YAIrE,0DACF;YADE,wLACF;YAIE,0DACF;YADE,wLACF;YAIE,0DACF;YADE,wLACF;YASE,0DACF;YADE,+KACF;;0BDlEJ;CAgHC;AAhG2B","file":"tab-settings-tab-settings-module.js","sourcesContent":["import { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { RouterModule, Routes } from '@angular/router'\nimport { IonicModule } from '@ionic/angular'\nimport { TranslateModule } from '@ngx-translate/core'\n\nimport { ComponentsModule } from '../../components/components.module'\n\nimport { TabSettingsPage } from './tab-settings.page'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TabSettingsPage\n  }\n]\n\n@NgModule({\n  imports: [CommonModule, ComponentsModule, FormsModule, IonicModule, RouterModule.forChild(routes), TranslateModule],\n  declarations: [TabSettingsPage]\n})\nexport class TabSettingsPageModule {}\n","import { Component } from '@angular/core'\nimport { AlertController, ToastController } from '@ionic/angular'\nimport { Observable } from 'rxjs'\n\nimport { MnemonicSecret } from '../../models/secret'\nimport { ErrorCategory, handleErrorLocal } from '../../services/error-handler/error-handler.service'\nimport { NavigationService } from '../../services/navigation/navigation.service'\nimport { SecretsService } from '../../services/secrets/secrets.service'\nimport { ClipboardService, IACMessageTransport, SerializerService } from '@airgap/angular-core'\nimport { IACService } from 'src/app/services/iac/iac.service'\n\n@Component({\n  selector: 'airgap-tab-settings',\n  templateUrl: './tab-settings.page.html',\n  styleUrls: ['./tab-settings.page.scss']\n})\nexport class TabSettingsPage {\n  public readonly secrets: Observable<MnemonicSecret[]>\n\n  constructor(\n    public readonly serializerService: SerializerService,\n    private readonly secretsService: SecretsService,\n    private readonly alertController: AlertController,\n    private readonly toastController: ToastController,\n    private readonly iacService: IACService,\n    private readonly clipboardService: ClipboardService,\n    private readonly navigationService: NavigationService\n  ) {\n    this.secrets = this.secretsService.getSecretsObservable()\n  }\n\n  public goToNewSecret(): void {\n    this.navigationService.route('/secret-setup').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public goToEditSecret(secret: MnemonicSecret): void {\n    this.navigationService.routeWithState('/secret-edit', { secret }).catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public goToInteractionSettings(): void {\n    this.navigationService.route('/interaction-selection-settings').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public goToErrorHistory(): void {\n    this.navigationService.route('/error-history').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public async deleteSecret(secret: MnemonicSecret): Promise<void> {\n    const alert: HTMLIonAlertElement = await this.alertController.create({\n      header: 'Delete ' + secret.label,\n      subHeader: 'Are you sure you want to delete ' + secret.label + '?',\n      buttons: [\n        {\n          text: 'Delete',\n          handler: async () => {\n            this.secretsService.remove(secret).catch(handleErrorLocal(ErrorCategory.SECURE_STORAGE))\n\n            const toast: HTMLIonToastElement = await this.toastController.create({\n              message: 'Secret deleted',\n              duration: 5000,\n              buttons: [\n                {\n                  text: 'Undo',\n                  role: 'cancel'\n                }\n              ]\n            })\n\n            toast.onDidDismiss().then((role) => {\n              if (role === 'close') {\n                this.secretsService.addOrUpdateSecret(secret).catch(handleErrorLocal(ErrorCategory.SECURE_STORAGE))\n              }\n            })\n\n            toast.present().catch(handleErrorLocal(ErrorCategory.IONIC_ALERT))\n          }\n        },\n        {\n          text: 'Cancel'\n        }\n      ]\n    })\n    alert.present().catch(handleErrorLocal(ErrorCategory.IONIC_ALERT))\n  }\n\n  public goToAbout(): void {\n    this.navigationService.route('/about').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public goToInteractionHistory(): void {\n    this.navigationService.route('/interaction-history').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public goToQrSettings(): void {\n    this.navigationService.route('/qr-settings').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public goToDangerZone(): void {\n    this.navigationService.route('/danger-zone').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public pasteClipboard(): void {\n    this.clipboardService.paste().then(\n      (text: string) => {\n        console.log('pasteClipboard', text)\n        this.iacService.handleRequest(text, IACMessageTransport.PASTE).catch((err) => console.error(err))\n      },\n      (err: string) => {\n        console.error('Error: ' + err)\n      }\n    )\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar color=\"secondary\">\n    <ion-title>{{ 'tab-settings.title' | translate }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-list>\n    <ion-list-header>\n      <ion-label>{{ 'tab-settings.information_label' | translate }}</ion-label>\n    </ion-list-header>\n\n    <ion-item lines=\"none\" detail=\"true\" (click)=\"goToAbout()\">\n      <ion-icon slot=\"start\" name=\"information-circle-outline\"></ion-icon>\n      <ion-label>{{ 'tab-settings.about' | translate }}</ion-label>\n    </ion-item>\n    <!--\n      TODO: Enable once history is in components lib\n      <ion-item lines=\"none\" detail=\"true\" (click)=\"goToInteractionHistory()\">\n        <ion-icon slot=\"start\" color=\"dark\" src=\"assets/icons/md-info.svg\"></ion-icon>\n        <ion-label>Interaction History</ion-label>\n      </ion-item>\n    -->\n  </ion-list>\n  <ion-list>\n    <ion-list-header>\n      <ion-label>{{ 'tab-settings.secrets_label' | translate }}</ion-label>\n    </ion-list-header>\n    <ng-container *ngFor=\"let secret of secrets | async\">\n      <airgap-secret-item [secret]=\"secret\" (click)=\"goToEditSecret(secret)\" class=\"ion-padding\"></airgap-secret-item>\n    </ng-container>\n    <ion-row class=\"ion-padding ion-justify-content-end\">\n      <ion-button color=\"secondary\" (click)=\"goToNewSecret()\" shape=\"round\">\n        <ion-icon slot=\"start\" name=\"add\"></ion-icon>\n        <ion-label>{{ 'tab-settings.add-settings_label' | translate }}</ion-label>\n      </ion-button>\n    </ion-row>\n  </ion-list>\n\n  <ion-list class=\"ion-no-border\" lines=\"none\">\n    <ion-list-header class=\"ion-no-margin\" lines=\"none\">\n      <ion-label>{{ 'tab-settings.interaction-options_label' | translate }}</ion-label>\n    </ion-list-header>\n    <ion-item (click)=\"pasteClipboard()\">\n      <ion-icon name=\"return-up-forward-outline\" slot=\"start\"></ion-icon>\n      {{ 'tab-settings.paste-from-clipboard_label' | translate }}\n    </ion-item>\n\n    <ion-item (click)=\"goToQrSettings()\">\n      <ion-icon name=\"qr-code-outline\" slot=\"start\"></ion-icon>\n      {{ 'tab-settings.qr-advanced-settings_label' | translate }}\n    </ion-item>\n\n    <ion-item (click)=\"goToInteractionSettings()\">\n      <ion-icon src=\"assets/icons/md-swap_horiz.svg\" slot=\"start\"></ion-icon>\n      {{ 'tab-settings.interaction-settings_label' | translate }}\n    </ion-item>\n\n    <ion-item (click)=\"goToErrorHistory()\">\n      <ion-icon name=\"bug-outline\" slot=\"start\"></ion-icon>\n      Local Error History\n    </ion-item>\n\n    <ion-item (click)=\"goToDangerZone()\">\n      <ion-icon name=\"warning\" slot=\"start\"></ion-icon>\n      {{ 'tab-settings.danger-zone_label' | translate }}\n    </ion-item>\n  </ion-list>\n</ion-content>\n"],"sourceRoot":"webpack:///"}