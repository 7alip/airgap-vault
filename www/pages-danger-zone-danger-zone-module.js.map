{"version":3,"sources":["./src/app/pages/danger-zone/danger-zone-routing.module.ts","./src/app/pages/danger-zone/danger-zone.page.ts","./src/app/pages/danger-zone/danger-zone.page.html","./src/app/pages/danger-zone/danger-zone.module.ts"],"names":[],"mappings":"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","file":"pages-danger-zone-danger-zone-module.js","sourcesContent":["import { NgModule } from '@angular/core'\nimport { Routes, RouterModule } from '@angular/router'\n\nimport { DangerZonePage } from './danger-zone.page'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DangerZonePage\n  }\n]\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class DangerZonePageRoutingModule {}\n","import { Component, OnInit } from '@angular/core'\nimport { AlertController } from '@ionic/angular'\nimport { TranslateService } from '@ngx-translate/core'\nimport { NavigationService } from 'src/app/services/navigation/navigation.service'\nimport { SecureStorageService } from 'src/app/services/secure-storage/secure-storage.service'\nimport { VaultStorageService } from 'src/app/services/storage/storage.service'\n\n@Component({\n  selector: 'airgap-danger-zone',\n  templateUrl: './danger-zone.page.html',\n  styleUrls: ['./danger-zone.page.scss']\n})\nexport class DangerZonePage implements OnInit {\n  constructor(\n    private readonly alertCtrl: AlertController,\n    private readonly translateService: TranslateService,\n    public readonly storageService: VaultStorageService,\n    private readonly secureStorage: SecureStorageService,\n    private readonly navigationService: NavigationService\n  ) {}\n\n  ngOnInit() {}\n\n  async resetVault() {\n    const alert = await this.alertCtrl.create({\n      header: this.translateService.instant('danger-zone.wipe.alert.title'),\n      message: this.translateService.instant('danger-zone.wipe.alert.message'),\n      buttons: [\n        {\n          text: this.translateService.instant('danger-zone.wipe.alert.cancel'),\n          role: 'cancel'\n        },\n        {\n          text: this.translateService.instant('danger-zone.wipe.alert.ok'),\n          handler: async () => {\n            try {\n              await this.secureStorage.wipe()\n              await this.storageService.wipe()\n            } catch (e) {\n              console.error('Wiping failed', e)\n              return this.resetVaultError()\n            }\n\n            this.navigationService.route('/').then(() => {\n              location.reload()\n            })\n          }\n        }\n      ]\n    })\n    alert.present()\n  }\n\n  async resetVaultError() {\n    const alert = await this.alertCtrl.create({\n      header: this.translateService.instant('danger-zone.wipe-error.alert.title'),\n      message: this.translateService.instant('danger-zone.wipe-error.alert.message'),\n      buttons: [\n        {\n          text: this.translateService.instant('danger-zone.wipe-error.alert.ok')\n        }\n      ]\n    })\n    alert.present()\n  }\n}\n","<ion-header>\n  <ion-toolbar color=\"secondary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"/tabs/tab-settings\"></ion-back-button>\n    </ion-buttons>\n\n    <ion-title>{{ 'danger-zone.label' | translate }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <p>{{ 'danger-zone.description' | translate }}</p>\n  <ion-list class=\"ion-no-border no-padding\" lines=\"none\">\n    <ion-item (click)=\"resetVault()\">\n      <ion-icon name=\"warning\" slot=\"start\"></ion-icon>\n      {{ 'danger-zone.wipe_label' | translate }}\n    </ion-item>\n  </ion-list>\n</ion-content>\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { FormsModule } from '@angular/forms'\n\nimport { IonicModule } from '@ionic/angular'\n\nimport { DangerZonePageRoutingModule } from './danger-zone-routing.module'\n\nimport { DangerZonePage } from './danger-zone.page'\nimport { TranslateModule } from '@ngx-translate/core'\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, DangerZonePageRoutingModule, TranslateModule],\n  declarations: [DangerZonePage]\n})\nexport class DangerZonePageModule {}\n"],"sourceRoot":"webpack:///"}