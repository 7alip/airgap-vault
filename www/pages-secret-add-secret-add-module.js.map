{"version":3,"sources":["./src/app/pages/secret-add/secret-add.module.ts","./src/app/pages/secret-add/secret-add.page.ts","./src/app/pages/secret-add/secret-add.page.html"],"names":[],"mappings":"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","file":"pages-secret-add-secret-add-module.js","sourcesContent":["import { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { RouterModule, Routes } from '@angular/router'\nimport { IonicModule } from '@ionic/angular'\nimport { TranslateModule } from '@ngx-translate/core'\nimport { ComponentsModule } from 'src/app/components/components.module'\n\nimport { SecretAddPage } from './secret-add.page'\nconst routes: Routes = [\n  {\n    path: '',\n    component: SecretAddPage\n  }\n]\n\n@NgModule({\n  entryComponents: [],\n  imports: [CommonModule, FormsModule, IonicModule, RouterModule.forChild(routes), TranslateModule, ComponentsModule],\n  declarations: [SecretAddPage]\n})\nexport class SecretAddPageModule {}\n","import { Component } from '@angular/core'\nimport { Platform } from '@ionic/angular'\n\nimport { MnemonicSecret } from '../../models/secret'\nimport { ErrorCategory, handleErrorLocal } from '../../services/error-handler/error-handler.service'\nimport { NavigationService } from '../../services/navigation/navigation.service'\nimport { SecretsService } from '../../services/secrets/secrets.service'\n\n// import { TranslateService } from '@ngx-translate/core'\n// import { ClipboardService } from '@airgap/angular-core'\n\n@Component({\n  selector: 'airgap-secret-add',\n  templateUrl: './secret-add.page.html',\n  styleUrls: ['./secret-add.page.scss']\n})\nexport class SecretAddPage {\n  public isGenerating: boolean = false\n\n  public isAndroid: boolean = false\n\n  public secret: MnemonicSecret\n\n  constructor(\n    // private readonly alertCtrl: AlertController,\n    // private readonly translateService: TranslateService,\n    // private readonly clipboardService: ClipboardService,\n    private readonly secretsService: SecretsService,\n    private readonly navigationService: NavigationService,\n    private readonly platform: Platform\n  ) {\n    if (this.navigationService.getState()) {\n      this.isGenerating = this.navigationService.getState().isGenerating\n      this.secret = this.navigationService.getState().secret\n\n      this.isAndroid = this.platform.is('android')\n    }\n  }\n\n  public async confirm(): Promise<void> {\n    try {\n      await this.secretsService.addOrUpdateSecret(this.secret)\n    } catch (error) {\n      handleErrorLocal(ErrorCategory.SECURE_STORAGE)(error)\n\n      // TODO: Show error\n      return\n    }\n\n    await this.dismiss()\n    if (this.isGenerating) {\n      this.navigationService.route('/account-add').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n    }\n  }\n\n  public async dismiss(): Promise<boolean> {\n    try {\n      return this.navigationService.routeToAccountsTab()\n    } catch (error) {\n      return false\n    }\n  }\n\n  public async togglePasscode(): Promise<void> {\n    this.secret.isParanoia = !this.secret.isParanoia\n  }\n\n  // private async showRecoveryKeyAlert(recoveryKey: string): Promise<void> {\n  //   const alert: HTMLIonAlertElement = await this.alertCtrl.create({\n  //     header: this.translateService.instant('secret-edit.secret-recovery-key.alert.title'),\n  //     subHeader: this.translateService.instant('secret-edit.secret-recovery-key.description'),\n  //     message: recoveryKey,\n  //     buttons: [\n  //       {\n  //         text: this.translateService.instant('secret-edit.secret-recovery-key.alert.copy'),\n  //         handler: () => {\n  //           this.clipboardService.copy(recoveryKey)\n  //         }\n  //       },\n  //       {\n  //         text: this.translateService.instant('secret-edit.secret-recovery-key.alert.done'),\n  //         handler: () => {}\n  //       }\n  //     ]\n  //   })\n  //   alert.present().catch(handleErrorLocal(ErrorCategory.IONIC_ALERT))\n  // }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar>\n    <ion-title>Save {{ 'secret-edit.title' | translate }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <p>{{ 'secret-edit.text' | translate }}</p>\n\n  <ion-item class=\"ion-no-padding\">\n    <ion-label color=\"white\" position=\"floating\">{{ 'secret-edit.secret_input_label' | translate }}</ion-label>\n    <ion-input [(ngModel)]=\"secret.label\"></ion-input>\n  </ion-item>\n\n  <!-- Fingerprint:\n  <pre>{{ secret.fingerprint}}</pre> -->\n\n  <p class=\"font--weight__med ion-padding-top\">{{ 'secret-edit.security-level.heading' | translate }}</p>\n\n  <p>{{ 'secret-edit.security-level.text' | translate }}</p>\n  <airgap-secret-option-item\n    [enabled]=\"true\"\n    [icon]=\"'assets/icons/md-fiber_pin.svg'\"\n    [active]=\"secret.isParanoia\"\n    [checkboxValue]=\"secret.isParanoia\"\n    (action)=\"togglePasscode()\"\n  >\n    <h2>{{ 'secret-edit.passcode.label' | translate }}</h2>\n    <p [innerHTML]=\"'secret-edit.passcode.text' | translate\"></p>\n  </airgap-secret-option-item>\n\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n    <ion-button color=\"primary\" shape=\"round\" [disabled]=\"secret.label.length < 1\" (click)=\"confirm()\">\n      {{ 'secret-edit.confirm_label' | translate }}\n    </ion-button>\n  </ion-fab>\n</ion-content>\n"],"sourceRoot":"webpack:///"}